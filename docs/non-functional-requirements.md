# 工場設備管理システム 非機能要件定義書

## 1. 可用性

### 1.1 システム稼働率
- **目標稼働率**: 99.9%以上
- **稼働時間**: 24時間365日（休日・正月も含む）
  - ヒアリング結果: 「やっぱり止まらないようにしてほしい。休日も正月もそうですけどね。」
- **許容ダウンタイム**: 月間8.76時間以内

### 1.2 障害回復
- **災害復旧時間**: 4時間以内
- **データ復旧**: 24時間365日いつでも即座に復旧可能
  - ヒアリング結果: 「24時間365日すぐでも戻せるようにしてほしい。まあいつお客さんいらっしゃってるかわかりませんからね。」

### 1.3 データバックアップ
- **バックアップ頻度**: 日次自動バックアップ
- **重要データ**: 課金情報・予約情報は特に重点的に保護
  - ヒアリング結果: 「ユーザーさんの課金の情報とか、予約の情報っていうのは、私たちの方で管理するってよりもそうですね。その連携サイトの方で、もちろん持っているわけですけど、ある程度はこちらでも持っておきたい」
- **データ保護レベル**: 業務継続に必要なデータは消失不可
  - ヒアリング結果: 「多分なくなると困るから」

### 1.4 冗長化
- **システム冗長化**: 主要コンポーネントの冗長構成
- **データセンター**: 複数リージョンでの分散配置
- **ネットワーク**: 複数の通信経路確保

## 2. 性能・拡張性

### 2.1 同時接続ユーザー数
- **目標同時接続数**: 10ユーザー
  - ヒアリング結果: 「ユーザーの数はまあ、おそらくですけど、同時にそうですね。10人くらい捌ければいいのかなと思う」
- **最大同時接続数**: 100ユーザー（将来拡張考慮）
- **ピーク時対応**: 想定の150%負荷まで対応可能

### 2.2 応答時間
- **リアルタイム監視**: 1秒以内の応答時間
- **ダッシュボード表示**: 3秒以内
- **レポート生成**: 30秒以内（大量データ処理時）
- **通常操作**: 2秒以内

### 2.3 スループット
- **データ処理能力**: 毎秒1,000件のセンサーデータ処理
- **同時トランザクション**: 50トランザクション/秒
- **バッチ処理**: 日次処理は4時間以内に完了

### 2.4 スケーラビリティ
- **設備数**: 最大1,000台まで対応
- **センサー数**: 設備あたり最大10個
- **データ量**: 月間10GB、年間120GB
- **水平スケーリング**: 需要に応じた自動スケールアウト機能

### 2.5 将来拡張性
- **機能追加対応**: 後から機能を追加する可能性を考慮
  - ヒアリング結果: 「後から機能を追加するかもしれないので、ええ、そこの対応ができればいいかなと思ってます」
- **アーキテクチャ**: マイクロサービス型での拡張容易性
- **API設計**: 拡張性を考慮したRESTful API

## 3. 運用・保守性

### 3.1 監視
- **システム監視**: 24時間365日の自動監視
- **性能監視**: CPU、メモリ、ディスク使用率の監視
- **アプリケーション監視**: エラー率、応答時間の監視
- **ビジネス監視**: 設備稼働率、アラート発生数の監視

### 3.2 ログ管理
- **ログ保存期間**: 1年間
- **ログレベル**: ERROR、WARN、INFO、DEBUG
- **監査ログ**: セキュリティ関連操作の詳細記録
- **アクセスログ**: ユーザーアクセスの完全記録

### 3.3 保守性
- **コード品質**: SonarQubeによる品質チェック
- **ドキュメント**: システム設計書、運用手順書の完備
- **テスト**: 自動テストカバレッジ80%以上
- **デプロイメント**: 自動デプロイメントパイプライン

### 3.4 運用サポート
- **エラー通知**: 重要エラーの即座通知
- **パフォーマンス分析**: 定期的な性能分析レポート
- **容量管理**: ストレージ使用量の監視と予測
- **メンテナンス時間**: 定期メンテナンス時間の設定（月1回、深夜2時間）

## 4. 移行性

### 4.1 データ移行
- **現行システム**: 新規開発のため該当なし
  - ヒアリング結果: 「現行のシステムはありません。新規に全部作ります。」
- **初期データ**: マスタデータの一括取り込み機能
- **段階移行**: 段階的な機能リリースによるスムーズな導入

### 4.2 システム移行
- **移行方式**: ビッグバン方式（新規開発のため）
- **移行テスト**: 本番環境での事前テスト実施
- **ロールバック**: 移行失敗時の即座復旧機能

### 4.3 ユーザー移行
- **トレーニング**: ユーザー向け操作研修の実施
- **マニュアル**: 操作マニュアル・FAQ の提供
- **サポート**: 移行後1ヶ月間の集中サポート

### 4.4 将来的な移行性
- **データエクスポート**: 標準形式でのデータ出力機能
- **API連携**: 他システムとの連携容易性
- **プラットフォーム独立**: 特定技術への依存度最小化

## 5. セキュリティ

### 5.1 認証・認可
- **認証方式**: Azure Active Directory統合
- **多要素認証**: MFA必須設定
- **アクセス制御**: RBAC（Role-Based Access Control）
- **セッション管理**: セッションタイムアウト30分

### 5.2 データ保護
- **個人情報保護**: 厳密なセキュリティ対策
  - ヒアリング結果: 「もちろんですけど、個人情報に近いところを管理することになると思いますから、その部分に関してはすごく厳密なものが必要だと思います」
- **データ暗号化**: 
  - 転送時: TLS 1.2以上
  - 保存時: AES-256暗号化
- **秘密情報管理**: Azure Key Vaultによる機密情報管理

### 5.3 ネットワークセキュリティ
- **ファイアウォール**: Azure Firewallによる通信制御
- **VPN接続**: 管理者アクセス時のVPN必須
- **DDoS対策**: Azure DDoS Protectionの有効化
- **侵入検知**: 不正アクセスの監視・検知

### 5.4 アプリケーションセキュリティ
- **入力検証**: SQLインジェクション、XSS対策
- **APIセキュリティ**: OAuth 2.0による認証
- **脆弱性管理**: 定期的なセキュリティ診断
- **ログ監視**: セキュリティイベントの監視

### 5.5 コンプライアンス
- **個人情報保護法**: 日本の個人情報保護法準拠
- **GDPR**: EU一般データ保護規則準拠（将来的な欧州展開考慮）
- **SOC 2**: セキュリティ統制の第三者認証
- **ISO 27001**: 情報セキュリティマネジメントシステム

## 6. 環境・サステナビリティ

### 6.1 環境配慮
- **グリーンエネルギー**: 太陽光発電等の活用可能性
  - ヒアリング結果: 「エコロジーですか。太陽光発なんかが使える環境があると、いいかなと思いますけどね」
- **クラウド利用**: Azureのグリーンデータセンター活用
- **エネルギー効率**: クラウドリソースの最適化による省エネ

### 6.2 リソース効率化
- **モバイル主体**: スマートフォンアプリ中心の設計
  - ヒアリング結果: 「まあほとんどスマホの中のアプリケーションだから、そこまではないかなと思います」
- **軽量設計**: 最小限のリソース使用
- **オートスケーリング**: 需要に応じたリソース調整

### 6.3 持続可能性
- **長期サポート**: 5年以上の継続利用想定
- **技術選定**: 長期サポートが期待できる技術の採用
- **アップデート**: 定期的なセキュリティ・機能アップデート

### 6.4 電力効率
- **サーバーリソース**: 効率的なクラウドリソース利用
- **データ転送**: 最適化されたデータ転送量
- **キャッシュ活用**: 不要な処理の削減

## 7. 法規制・標準準拠

### 7.1 業界標準
- **ISO 14001**: 環境マネジメントシステム
- **ISO 50001**: エネルギーマネジメントシステム
- **IEC 62443**: 産業用オートメーション及び制御システムセキュリティ

### 7.2 データ保護規制
- **個人情報保護法**: 日本の法規制準拠
- **業界ガイドライン**: 製造業におけるデータ管理ガイドライン
- **輸出管理**: 技術輸出に関する規制確認

## 8. 運用コスト

### 8.1 初期コスト
- **開発費用**: プロトタイプ開発予算内
- **インフラ費用**: Azureクラウドサービス利用料
- **ライセンス費用**: 必要なソフトウェアライセンス

### 8.2 運用コスト
- **月額クラウド費用**: 使用量ベースの従量課金
- **保守費用**: 年間開発費の15%程度
- **サポート費用**: 24時間365日サポート体制

### 8.3 コスト最適化
- **リソース監視**: Azure Cost Managementによるコスト監視
- **自動スケーリング**: 需要に応じたリソース調整
- **予約インスタンス**: 長期利用でのコスト削減